From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Timothy Southwick <NickNackGus@gmail.com>
Date: Tue, 21 Mar 2023 19:12:19 -0400
Subject: [PATCH] Monumenta - Patched movement exploit


diff --git a/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java b/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
index ff7ce59002bf3922c48cd3c3aad37ec85a166739..854382d94fb408d58a6724bf32cb216eaf1cfff9 100644
--- a/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
+++ b/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
@@ -559,7 +559,7 @@ public class ServerGamePacketListenerImpl implements ServerPlayerConnection, Ser
                 ++this.receivedMovePacketCount;
                 int i = this.receivedMovePacketCount - this.knownMovePacketCount;
                 if (i > Math.max(this.allowedPlayerTicks, 5)) {
-                    ServerGamePacketListenerImpl.LOGGER.debug(this.player.getScoreboardName() + " is sending move packets too frequently (" + i + " packets since last tick)");
+                    ServerGamePacketListenerImpl.LOGGER.warn(this.player.getScoreboardName() + " is sending move packets too frequently (" + i + " packets since last tick)"); // Monumenta
                     i = 1;
                 }
 
@@ -586,7 +586,7 @@ public class ServerGamePacketListenerImpl implements ServerPlayerConnection, Ser
                 }
                 // Paper end
 
-                if (d10 - d9 > Math.max(100.0D, Math.pow((double) (org.spigotmc.SpigotConfig.movedTooQuicklyMultiplier * (float) i * speed), 2)) && !this.isSingleplayerOwner()) {
+                if (d10 - d9 > Math.max(100.0D, Math.pow(i * (double) (org.spigotmc.SpigotConfig.movedTooQuicklyMultiplier * speed), 2)) && !this.isSingleplayerOwner()) { // Monumenta
                 // CraftBukkit end
                     ServerGamePacketListenerImpl.LOGGER.warn("{} (vehicle of {}) moved too quickly! {},{},{}", new Object[]{entity.getName().getString(), this.player.getName().getString(), d6, d7, d8});
                     this.connection.send(new ClientboundMoveVehiclePacket(entity));
